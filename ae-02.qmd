---
title: "Geom, Geom in ggplot2, Which is the Best of Them All?"
format: html
editor: visual
---

# Setup

```{r}
#| label: load-packages
#| message: false

library(tidyverse)
library(openintro)
library(scales)
```

# Part 1 - Visualizing relationships and distributions together

1.  Create a visualization that displays the relationship between two numerical variables (`price` and `area`) as well as the distributions of the individual variables in a single plot.

```{r}
#| label: first visualization

ggplot(duke_forest, aes(x = area, y = price)) +
  geom_point(alpha = 0.7) +
  geom_smooth(method = "lm", se = FALSE) +
  scale_x_continuous(labels = label_number(big.mark = ",")) + 
  scale_y_continuous(labels = label_dollar(scale = 1/1000, suffix = "K")) +
  labs(y = "Sale Price (USD)",
       x = "Area (square feet)",
       title = "Prices of houses in Duke Forest by Area")



```

\

2.  Build on the plot from Exercise 1 to show the individual values of the number of beds in houses plotted. Experiment with other aesthetic mappings you can bring in to further improve the display.

```{r}
#| label: second visualization

ggplot(duke_forest, aes(x = area, y = price, color = factor(bed))) + 
  geom_point(alpha = 0.7, size = 2) + 
  scale_x_continuous(labels = label_number(big.mark = ",")) + 
  scale_y_continuous(labels = label_dollar(scale = 1/1000, suffix = "K")) +
   labs(y = "Sale Price (USD)", 
       x = "Area (square feet)", 
       title = "Prices of houses in Duke Forest by Area", 
       color = "Number of bedrooms")
```

# Part 2 - Visualizing variability

Visualize the mean sale price of houses for each year built along with a measure of the variability of sale prices for that built year. Critique your plots for how appropriately they visualize / communicate the variability in house prices for a given year built.

You're welcomed to use any code developed so far in the slides and build on it.

```{r}
#| label: label-me-3

mean_price_year <- duke_forest %>%
  group_by(year_built) %>%
  summarize(
    n = n(),
    mean_price = mean(price),
    sd_price = sd(price)
  )

glimpse(mean_price_year)
```

```{r}
ggplot(mean_price_year, aes(x = year_built, y = mean_price, color = n)) + 
  geom_pointrange(aes(
    ymin = mean_price - sd_price, 
    ymax = mean_price + sd_price
  )) + 
   scale_y_continuous(labels = label_dollar(scale = 1/1000, suffix = "K")) +
  labs(x = "Year built", 
       y = "Average Price (USD)", 
       color = "Number of houses built", 
       title = "Average price of homes built in Duke Forest by year") 
```
